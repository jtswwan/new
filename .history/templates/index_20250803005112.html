<!DOCTYPE html>
<!-- HTML5 文件類型聲明 - 告訴瀏覽器使用現代 HTML5 標準 -->
<html lang="zh-TW">
<!-- HTML 根元素，設定繁體中文語言屬性，用於無障礙和 SEO 優化 -->
<head>
    <!-- 文件頭部區域，包含元數據和資源聲明 -->
    <meta charset="UTF-8">
    <!-- 字符編碼設為 UTF-8，支援國際字符 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- 響應式視窗標籤，採用移動優先設計方法 -->
    <title>CoolSpace AI - 智慧節能冷卻系統</title>
    <!-- 文件標題，顯示在瀏覽器分頁並被搜尋引擎使用 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- 從 CDN 載入 Chart.js 圖表庫，用於數據視覺化組件 -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Google 字體 - Noto Sans 繁體中文，多種字重用於排版 -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- 主要樣式表，用於組件樣式和版面定義 -->
    <script src="{{ url_for('static', filename='app.js') }}" defer></script>
    <!-- 核心應用程式 JavaScript - 延遲載入以優化效能 -->
</head>
<body>
    <!-- 網頁的主體內容開始 -->
    <div class="container">
        <!-- 最外層容器，包住所有內容 -->
        
        <!-- Header 頁面頂部區域 -->
        <header class="header">
            <!-- 網頁標題區域 -->
            <div class="header-content">
                <!-- 標題內容的容器 -->
                <h1 class="header-title">🌿 CoolSpace AI</h1>
                <!-- 主標題，顯示系統名稱 -->
                <p class="header-subtitle">台灣智慧節能冷卻優化系統 - 支援SDGs永續發展目標</p>
                <!-- 副標題，說明系統功能 -->
                <div class="header-stats">
                    <!-- 統計數據顯示區域 -->
                    <div class="stat-item">
                        <!-- 第一個統計項目：電費節省 -->
                        <span id="totalSavings" class="stat-value">NT$ 4,560</span>
                        <!-- 顯示節省的電費金額，id 讓程式可以更新這個數字 -->
                        <span class="stat-label">年度電費節省</span>
                        <!-- 說明這個數字代表什麼 -->
                    </div>
                    <div class="stat-item">
                        <!-- 第二個統計項目：CO2 減量 -->
                        <span id="co2Reduction" class="stat-value">1.37噸</span>
                        <!-- 顯示減少的二氧化碳排放量 -->
                        <span class="stat-label">CO2 年減量</span>
                        <!-- 說明標籤 -->
                    </div>
                    <div class="stat-item">
                        <!-- 第三個統計項目：效率提升 -->
                        <span id="efficiencyGain" class="stat-value">28%</span>
                        <!-- 顯示冷卻效率提升的百分比 -->
                        <span class="stat-label">冷卻效率提升</span>
                        <!-- 說明標籤 -->
                    </div>
                </div>
            </div>
        </header>

        <!-- Tab Content -->
        <main class="tab-content-container">
            <!-- Simulation Tab -->
            <div id="simulation" class="tab-content active">
                <div class="simulation-layout">
                    <!-- Control Panel -->
                    <div class="control-panel card">
                        <h2 class="control-title">🎛️ 智慧控制面板</h2>
                        
                        <div class="control-group">
                            <label class="form-label">
                                🌡️ 空調溫度設定: <span id="acTempLabel" class="temp-value">26°C</span>
                            </label>
                            <input type="range" id="acTemp" min="18" max="30" value="26" class="form-control temp-slider">
                            <div class="temp-indicators">
                                <span class="temp-mark">18°C</span>
                                <span class="temp-mark">24°C</span>
                                <span class="temp-mark">30°C</span>
                            </div>
                        </div>

                        <div class="control-group">
                            <label class="form-label">🏠 房型模板選擇</label>
                            <select id="roomTemplate" class="form-control">
                                <option value="custom">自訂佈局</option>
                                <option value="studio">套房 (25㎡)</option>
                                <option value="1br">一房一廳 (35㎡)</option>
                                <option value="2br">兩房一廳 (50㎡)</option>
                            </select>
                        </div>

                        <button id="getSuggestionBtn" class="btn btn--primary btn--full-width suggestion-btn">
                            🤖 獲取 AI 智慧優化建議
                        </button>

                        <div class="control-group">
                            <h3 class="section-title">🪑 新增傢俱物品</h3>
                            <div class="furniture-grid">
                                <button id="addSofaBtn" class="furniture-btn">
                                    <span>🛋️</span>
                                    <span>沙發</span>
                                </button>
                                <button id="addTableBtn" class="furniture-btn">
                                    <span>🪑</span>
                                    <span>桌子</span>
                                </button>
                                <button id="addBedBtn" class="furniture-btn">
                                    <span>🛏️</span>
                                    <span>床鋪</span>
                                </button>
                                <button id="addDeskBtn" class="furniture-btn">
                                    <span>📚</span>
                                    <span>書桌</span>
                                </button>
                                <button id="addFridgeBtn" class="furniture-btn">
                                    <span>🧊</span>
                                    <span>其他物體</span>
                                </button>
                                <!-- 新增：風扇 / 冷氣按鈕 -->
                                <button id="addFanBtn" class="furniture-btn">
                                <span>🌀</span>
                                <span>風扇</span>
                                </button>
                                <button id="addAcBtn" class="furniture-btn">
                                <span>❄️</span>
                                <span>冷氣</span>
                                </button>
                            </div>
                        </div>

                        <div class="control-group">
                            <h3 class="section-title">📖 操作說明</h3>
                            <ul class="instruction-list">
                                <li>拖曳 <span class="highlight green">風扇</span> 調整位置與角度</li>
                                <li>拖曳 <span class="highlight yellow">傢俱</span> 重新佈局空間</li>
                                <li>點擊 <span class="highlight green">風扇</span> 旋轉 45 度</li>
                                <li><span class="highlight blue">空調</span> 位置固定在右上角</li>
                                <li>觀察即時 <span class="highlight purple">熱力圖</span> 與 <span class="highlight cyan">氣流動畫</span></li>
                                <li><span class="highlight orange">舒適區</span> 以虛線框標示</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Simulation Canvas -->
                    <div class="simulation-area">
                        <div class="canvas-container card">
                            <div class="canvas-header">
                                <h3>🌊 即時空間模擬視圖</h3>
                                <div class="simulation-status">
                                    <span class="status-indicator active">模擬中</span>
                                </div>
                            </div>
                            <canvas id="simulationCanvas"></canvas>
                            <div class="canvas-legend">
                                <div class="legend-item">
                                    <div class="legend-color heat-cold"></div>
                                    <span>冷卻區域</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color heat-warm"></div>
                                    <span>溫暖區域</span>
                                </div>
                                <div class="legend-item">
                                    <div class="legend-color heat-hot"></div>
                                    <span>高溫區域</span>
                                </div>
                            </div>
                        </div>

                        <!-- AI Suggestions -->
                        <div id="aiSuggestions" class="suggestions card hidden">
                            <h2 class="suggestions-title">🧠 AI 智慧分析與建議</h2>
                            <ul id="suggestionText" class="suggestion-list">
                                <li>歡迎使用 CoolSpace AI！請先選擇房型或新增傢俱，然後點擊「獲取 AI 智慧優化建議」按鈕。</li>
                                <li>系統將根據台灣氣候特色，為您提供個人化的節能冷卻方案。</li>
                            </ul>
                        </div>

                        <!-- Real-time Metrics -->
                        <div class="metrics-grid">
                            <div class="metric-card card">
                                <div class="metric-icon">😌</div>
                                <h3 class="metric-title">舒適度評分</h3>
                                <div id="comfortMetric" class="metric-value success">85%</div>
                                <div class="metric-description">舒適區域溫度適宜度</div>
                            </div>
                            <div class="metric-card card">
                                <div class="metric-icon">⚡</div>
                                <h3 class="metric-title">能耗指數</h3>
                                <div id="energyMetric" class="metric-value error">72</div>
                                <div class="metric-description">當前功耗水準</div>
                            </div>
                            <div class="metric-card card">
                                <div class="metric-icon">🌪️</div>
                                <h3 class="metric-title">氣流效率</h3>
                                <div id="airflowMetric" class="metric-value info">78%</div>
                                <div class="metric-description">空氣循環優化度</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Analytics Tab -->
            <div id="analytics" class="tab-content">
                <div class="analytics-layout">
                    <div class="chart-section">
                        <div class="chart-card card">
                            <h3 class="chart-title">📈 每日用電量趨勢分析</h3>
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <canvas id="dailyChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</body>
</html>