<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CoolSpace AI â€” Oasis@Home</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <h1>CoolSpace AI â€” Oasis@Home</h1>
        <p>åŸå¸‚å¾®ç¶ æ´²å®¤å…§ç¯€èƒ½å„ªåŒ–ç³»çµ±</p>
    </header>

    <main>
        <div class="control-panel">
            <h2>æ™ºæ…§æ§åˆ¶é¢æ¿</h2>
            
            <div class="input-group">
                <label for="temperature">å†·æ°£è¨­å®šæº«åº¦ (Â°C)</label>
                <input type="range" id="temperature" min="16" max="30" value="26" step="1">
                <span id="temp-display">26Â°C</span>
            </div>

            <div class="input-group">
                <label for="room-type">æˆ¿é–“é¡å‹</label>
                <select id="room-type">
                    <option value="å®¢å»³">å®¢å»³</option>
                    <option value="è‡¥å®¤">è‡¥å®¤</option>
                    <option value="æ›¸æˆ¿">æ›¸æˆ¿</option>
                    <option value="å…¶ä»–">å…¶ä»–</option>
                </select>
            </div>

            <button id="analyze-btn">åˆ†æç¯€èƒ½æ©Ÿæœƒ</button>
        </div>

        <div id="results" class="hidden">
            <h2>AI å„ªåŒ–å»ºè­°</h2>
            <div id="suggestions"></div>
            <div id="savings"></div>
        </div>
    </main>

    <script>
        // æ›´æ–°æº«åº¦é¡¯ç¤º
        const tempSlider = document.getElementById('temperature');
        const tempDisplay = document.getElementById('temp-display');
        tempSlider.addEventListener('input', () => {
            tempDisplay.textContent = `${tempSlider.value}Â°C`;
        });

        // åˆ†ææŒ‰éˆ•é»æ“Šäº‹ä»¶
        document.getElementById('analyze-btn').addEventListener('click', async () => {
            const temperature = parseInt(tempSlider.value);
            const roomType = document.getElementById('room-type').value;

            try {
                const response = await fetch('/analyze', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ temperature, room_type: roomType })
                });

                const data = await response.json();
                
                // é¡¯ç¤ºçµæœ
                const resultsDiv = document.getElementById('results');
                const suggestionsDiv = document.getElementById('suggestions');
                const savingsDiv = document.getElementById('savings');

                suggestionsDiv.innerHTML = data.suggestions.map(s => `<p>â€¢ ${s}</p>`).join('');
                savingsDiv.innerHTML = `<p class="savings">ğŸ’¡ ${data.estimated_savings}</p>`;
                
                resultsDiv.classList.remove('hidden');
            } catch (error) {
                console.error('åˆ†æè«‹æ±‚å¤±æ•—:', error);
                alert('åˆ†æéç¨‹ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚');
            }
        });
    </script>
</body>
</html>
